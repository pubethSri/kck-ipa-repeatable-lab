---
- name: Set MOTD banner on Cisco router
  hosts: all
  gather_facts: no
  connection: network_cli

  vars:
    ansible_network_os: cisco.ios.ios
    ansible_ssh_common_args: "-oKexAlgorithms=+diffie-hellman-group14-sha1 -oHostKeyAlgorithms=+ssh-rsa"

  tasks:
    - name: Set MOTD banner                                                                                                                                                                                                                                                 
      ios_config:
        lines:
          - "banner motd #{{ custom_motd }}#"